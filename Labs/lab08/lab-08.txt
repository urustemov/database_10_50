serdar@vostro:~$ sudo -i -u postgres
[sudo] password for serdar: 
postgres@vostro:~$ psql
psql (12.22 (Ubuntu 12.22-0ubuntu0.20.04.4))
Type "help" for help.

postgres=# CREATE DATABASE lab8;
CREATE DATABASE
postgres=# \c lab8;
You are now connected to database "lab8" as user "postgres".
lab8=# CREATE TABLE students (
lab8(#     student_id SERIAL PRIMARY KEY,
lab8(#     full_name VARCHAR(100) NOT NULL
lab8(# );
CREATE TABLE
lab8=# 
lab8=# CREATE TABLE courses (
lab8(#     course_id SERIAL PRIMARY KEY,
lab8(#     course_name VARCHAR(100) NOT NULL
lab8(# );
CREATE TABLE
lab8=# 
lab8=# CREATE TABLE enrollments (
lab8(#     enrollment_id SERIAL PRIMARY KEY,
lab8(#     student_id INT REFERENCES students(student_id) ON DELETE CASCADE,
lab8(#     course_id INT REFERENCES courses(course_id) ON DELETE CASCADE,
lab8(#     grade CHAR(2)
lab8(# );
CREATE TABLE
lab8=# INSERT INTO students (full_name) VALUES ('Ivan Petrov'), ('Anna Ivanova');
INSERT 0 2
lab8=# INSERT INTO courses (course_name) VALUES ('Math'), ('Physics');
INSERT 0 2
lab8=# INSERT INTO enrollments (student_id, course_id, grade) VALUES (1, 1, 'A'), (1, 2, 'B'), (2, 1, 'C');
INSERT 0 3
lab8=# -- Все записи
lab8=# SELECT * FROM enrollments;
 enrollment_id | student_id | course_id | grade 
---------------+------------+-----------+-------
             1 |          1 |         1 | A 
             2 |          1 |         2 | B 
             3 |          2 |         1 | C 
(3 rows)

lab8=# 
lab8=# -- Попробуй удалить студента
lab8=# DELETE FROM students WHERE student_id = 1;
DELETE 1
lab8=# 
lab8=# -- Проверим, что записи с этим student_id удалились (ON DELETE CASCADE)
lab8=# SELECT * FROM enrollments;
 enrollment_id | student_id | course_id | grade 
---------------+------------+-----------+-------
             3 |          2 |         1 | C 
(1 row)

lab8=# \q
postgres@vostro:~$ 
